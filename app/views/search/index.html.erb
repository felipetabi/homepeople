<%= form_with(url: search_path, method: :get, class: 'navbar-form navbar-left') do |f| %>
  <div class="input-group" data-controller="search">
    <%= f.select :region, @cities, {:prompt => "Selecciona una Region"}, data: {action: "click->search#funcion"}, class:"form-select", :required => true %>
    <%= f.select :comuna, [], {:prompt => "--Comuna--"}, class:"form-select", :required => true %>
    <%= f.date_field :start_date, class: "form-control", value: DateTime.now.strftime("%Y-%m-%d"), min: DateTime.now.strftime("%y-%m-%d"), max: (DateTime.now+1.year).strftime("%y-%m-%d"), :required => true %>
    <%= f.date_field :end_date, class: "form-control", min: (DateTime.now+1.day).strftime("%y-%m-%d"), max: (DateTime.now+1.year).strftime("%y-%m-%d") %>
    <%= f.select :category_id, @categories.map{|category| [category.name, category.id]},{}, class:"form-select", :required => true %>
    <div class="input-group-btn">
      <%= button_tag "Buscar servicio", :class => 'btn btn-primary',:name => nil%>
    </div>
  </div>
<% end %>

<% @services.each do |service| %>
  <%= link_to service.title, service_path(service, {start_date: params[:start_date]}), class:"btn btn-primary" %>
  <%= service.region %>
  <%= service.comuna %>
  <%= service.category.name %>
<% end %>